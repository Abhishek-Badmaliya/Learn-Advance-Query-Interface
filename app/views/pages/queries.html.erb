<html>
  <body>
    <div class="text-center mt-4">
      <%=  link_to 'Customers listing', customers_path, class:"btn btn-outline-secondary" %> ||
      <%=  link_to 'Orders listing', orders_path, class:"btn btn-outline-secondary" %> ||
      <%=  link_to 'Products listing', products_path, class:"btn btn-outline-secondary" %>
    </div>

    <p class="fs-2 text-center mt-4">Most sales product by quantity</p><hr>
    <table width=100%>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone Number</th>
          <th>Sum of Quantity</th>
        </tr>
      </thead>
      <tbody>
        <% Order.select('customer_id, sum(quantity) as Sum_Of_Quantity').group('customer_id').order(Sum_Of_Quantity: :desc).first(3).each do |s| %>
          <tr>
            <td><%= s.customer.cust_fname %> <%= s.customer.cust_lname %></td>
            <td><%= s.customer.cust_email %></td>
            <td><%= s.customer.cust_phone_number %></td>
            <td><%= s.Sum_Of_Quantity %></td>
          </tr>
        <% end %>   
      </tbody>
    </table><br>

    <p class="fs-2 text-center mt-4">Most sales product by price</p><hr>
    <table width=100%>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone Number</th>
          <th>Sum of Total Price</th>
        </tr>
      </thead>
      <tbody>
        <% Order.select('customer_id, sum(total_price) as Sum_Of_Total_Price').group('customer_id').order(Sum_Of_Total_Price: :desc).first(3).each do |s| %>
          <tr>
            <td><%= s.customer.cust_fname %> <%= s.customer.cust_lname %></td>
            <td><%= s.customer.cust_email %></td>
            <td><%= s.customer.cust_phone_number %></td>
            <td><%= s.Sum_Of_Total_Price %></td>
          </tr>
        <% end %>   
      </tbody>
    </table><br>
  </body>
</html>
